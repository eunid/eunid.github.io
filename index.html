<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Redirect</title>

</head>

<body>
    <div class="message"></div>
    <a href="index.html" id="backlinkAndroid">Get me back - HTTPs</a> <br> <br>

    <script>
        const apps = {
            Android: 'https://netid-sdk-web.letsdev.de/redirect',
            iOS: 'https://www.apple.com/store'
        };

        const platform = () => {
            let userAgent = navigator.userAgent || navigator.vendor || window.opera;
            console.log(userAgent);
            if (/android/i.test(userAgent)) return 'Android';
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) return 'iOS';
            return 'other';
        };

        const redirect = () => {
            let os = platform();
            let redirectURI = apps[os] + document.location.search
            let androidLink = document.getElementById('backlinkAndroid')
        
            if (os in apps) {
                console.log(redirectURI)
                androidLink.setAttribute('href',redirectURI)
            } else {
                const message = document.querySelector('.message');
                message.innerText = 'Your OS is not supported';
            }
        };
        redirect();
    </script>
</body>

</html>